# -*- coding: utf-8 -*-
'''
Stage: "stage name"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def back_home(w: World):
    kyo = w.get("kyoko")
    return w.scene('いつもの帰宅',
            w.cmd.change_stage("Apart"),
            kyo.do("交差点で左に曲がり、ブロック塀を少し行くと二階建てのアパートが見えてくる"),
            kyo.do("自転車を駐輪場に止めて籠から買い物袋を取り出すと、鍵を掛けてからスチール製の階段をたんたんと登って自宅に向かう"),
            kyo.do("暗いままの部屋が殆どで、私の二〇四号室まで暗がりを歩いていく。お隣は今は空いていると聞いているから、できればこのまま残り三年間を何事もなく過ごせるようにそのままでいて欲しかった"),
            )


def his_introduction(w: World):
    kyo = w.get("kyoko")
    jk, sk = w.get("jrkyoko"), w.get("sjkyoko")
    sho = w.get("shota")
    return w.scene("自己紹介",
            w.cmd.change_stage("Apart"),
            kyo.be(),
            sho.be(),
            sk.be(),
            kyo.do("$Mに微笑み掛けながらその指に赤い毛糸で三本線の川を作って見せている彼は何も返事がないことに眉を顰めると、再度こう言った"),
            sho.talk("今日子さん？　おかえりだよ"),
            sk.talk("おかえりだよ。キャハハ"),
            kyo.do("その青年の右肩に両手を載せて笑い声を上げながら飛び上がる少女は十歳の頃の私で、",
                "本来なら彼に見えるはずのない存在だ"),
            kyo.talk("ねえ……あなたって、何者？"),
            kyo.do("外灯の明かりでスチール製の階段に座っている彼の姿がぼんやりと見えているけれどその白い肌の所為か薄っすら浮かんでいるようにすら感じる",
                    "サラサラの細い髪がアイドルグループの誰かみたいに眉の上で切り揃えられていて二重のころころとした瞳が小動物を思わせた"),
            sho.talk("宮内翔太郎という名前に心当たりはある？"),
            kyo.do("当然聞いたことはないし、仮にその名を知っていたとして、彼と何の関係があるというのだろう。私は小さく首を振る"),
            sho.talk("それは残念。ボクの名前が宮内翔太郎なんだ"),
            kyo.talk("からかってるんですか？"),
            sho.talk("そっちこそ、大事な約束、忘れたのかな？"),
            kyo.do("約束、というワードに一瞬軽い目眩《めまい》がした"),
            kyo.do("彼、宮内翔太郎は立ち上がると｜きょう子《・・・・》に毛糸を渡し、階段を降りる。私の前に立つとほぼ目線の高さが同じだ。黒目の大きなとても澄んだ瞳がぼんやり照らされ、じっと向けられた"),
            kyo.talk("どうして｜きょう子《・・・・》が見えるんですか？"),
            kyo.do("けれど彼は首を傾《かし》げ、意味の分からない苦笑を浮かべる"),
            kyo.talk("あの子は私のＩＦ……つまりイマジナリーフレンドなんですよ？"),
            sho.talk("それって小さい頃に空想上の遊び相手が見えるってやつでしょ？　でもさ"),
            kyo.do("彼は振り返り、一人で階段に腰掛けて綾取りをして遊ぶきょう子を確かに見ていた"),
            sho.talk("ちゃんとボクの目からは赤い糸で綾取りをしている女の子が見えているよ"),
            kyo.do("嘘や冗談の類で私をからかっている訳ではなさそうだ"),
            kyo.do("――幽霊？"),
            kyo.do("そんな可能性を思いついて恐くなり私は慌てて彼を迂回すると、"),
            kyo.talk("さっさと家に入って"),
            kyo.do("口を結んでほっぺを膨らませたきょう子の手を取り階段を駆け上がる"),
            kyo.do("二階まで登り終えると一度だけ振り返って視線を向けたが、彼は困ったように私を見上げながら後頭部を掻いている", "&"),
            kyo.do("けれど追いかけてくるような素振りはなく、まるで地縛霊のように動かないでいてくれたので、私は「行こ」ときょう子に口早に言って二〇四号室まで急いだ"),
            )


def shotaro_again(w: World):
    kyo = w.get("kyoko")
    jk, sk = w.get("jrkyoko"), w.get("sjkyoko")
    sho = w.get("shota")
    return w.scene("$shota現れる",
            w.cmd.change_stage("Apart"),
            kyo.be(),
            kyo.do("まだ日は落ちていなかったけれどそれでも街の空気がどこかしら夜に近づいているのを感じさせる",
                "通りを行く会社員のどこか浮ついた様子だろうか",
                "行き交う車の多さからだろうか",
                "ただ単に$Mの自転車の前籠に入れたスーパーの袋がそう思わせるだけかも知れない"),
            kyo.do("そんなことを考えながら路地を曲がるとアパートが見えてくる",
                "$Mは少しペダルを漕ぐ力を緩め、きょうこたちの姿が頭を過り始めると、", "&"),
            kyo.do("$Mの視界に軽く手を挙げてみせるあのマッシュルームの笑顔が割り込んできた"),
            kyo.do("思わず急ブレーキを掛けて止まる"),
            sho.talk("こんばーんは"),
            kyo.do("丈の短いズボンのポケットに手を突っ込んだままそう言ってニッと笑うと、",
                "自転車を降りた$Mに遠慮なく近づいてきた",
                "$full_shotaだ"),
            kyo.talk("何ですか？"),
            kyo.do("警戒心むき出しの$Mに対しても平気でその悪意の欠片もない子どもの笑顔を向ける彼は、", "&"),
            kyo.do("楽しげに歩いてやってくると$Mの周囲の匂いを嗅いで回る"),
            kyo.talk("犬？"),
            sho.talk("魚臭い"),
            kyo.talk("鮭買ったのよ。焼こうと思って……ちょっと！"),
            sho.talk("三匹？"),
            kyo.do("いつも三人分を購入するのが癖になっていた"),
            kyo.talk("冷凍しておくから"),
            sho.talk("$kyokoって嘘を付く時ちょっと上を向いて鼻を膨らますよね"),
            kyo.do("それは$jrkyokoに言われて初めて気づいた自分の癖だった"),
            kyo.talk("なんであなたがそんなこと知ってるの？"),
            kyo.do("彼は目を細めて笑ってから背を向けると、"),
            sho.talk("なんで？　って言いたいのはこっちなんだけどなあ"),
            kyo.do("クスクスと声を漏らしながら階段の前までいくとそこで、くるり、と$Mを振り返り真面目な顔になる"),
            sho.talk("今日子、忘れちゃった？　それとも記憶から消したの？　大事な約束のこと"),
            kyo.do("やくそく。と心の中で復唱する"),
            kyo.do("私の二十年余りの人生のアルバムには一枚も彼が写った写真なんてない",
                "それなのに混じり気のない純粋な笑顔は確かに見覚えがある", "既知感みたいなものだろうか", "それとも本当に忘れてしまっているのだろうか"),
            kyo.talk("いつ頃の話なの？　私、実はいくつか記憶が抜けている時期があるの",
                "もしその時の私と出会って何か約束をしたというなら、その私は私じゃないから"),
            kyo.do("自分でも何を言っているのだろうとは思う",
                "彼は小首を傾げて私の表情を覗き込むように視線を投げている"),
            kyo.talk("あなたに説明しても分からないと思うけど、私ってね、他人とはちょっと違うの。ちょっとだけおかしいところがあるの",
                "昨日あなたが見たという女の子",
                "彼女は現実には存在しないの",
                "でも私はそういうものが見える。見えないものが見えるのよ"),
            sho.talk("幽霊ってこと？"),
            kyo.talk("違うけど、でも似たようなもの。本来なら私以外には見えないものなのよ、彼女たちは"),
            sho.talk("たち？　他にもいるの？"),
            kyo.do("喋りすぎた。追い払おうとして饒舌になりすぎた", "&"),
            kyo.do("よくやる失敗だった",
                "こういう時に人付き合いの不慣れさというものが露呈し易い。それも相手が異性なら尚更だ"),
            kyo.do("私は「とにかくごめんなさい」とだけ言って自転車をアパートの駐輪場に入れる"),
            sho.talk("何か気分を害したなら謝るよ。そうじゃなくてさ、今日は大事な話があって来た"),
            kyo.do("彼は駆け寄ってきて私の隣に並ぶと、前籠から買い物袋と鞄を引き抜いて持ってくれる"),
            kyo.talk("帰ってくれた方がありがたいんですけど"),
            sho.talk("話を聞いてくれたら帰る"),
            kyo.do("迷惑だな、と感じているのに、その人懐こい笑顔の所為か、不思議と危険を感じない"),
            kyo.do("そもそも普段ならこんな近くに全然知らない男性がいたらすぐ走って逃げ出したくなる", "&"),
            kyo.do("横並びになると彼が私とそう差のない背丈であることがよく分かった",
                    "少なくとも百七十はない。松本のように筋肉質という訳でもなく、色白で猫のような柔らかい髪の毛をしていた"),
            kyo.talk("それ、返して下さい"),
            sho.talk("部屋まで持ってくけど？"),
            kyo.talk("そんなことしたらあなたを入れないといけないでしょう？　小さい頃に教わらなかったんですか？　知らない人を勝手に家に上げてはいけないって"),
            kyo.do("小さな男の子に言い聞かせるような口ぶりになってしまったけれど、しゅんと俯いた彼にはこちらを保育士のような気にさせる趣があった"),
            sho.talk("今日子って、そういうとこあるよね"),
            kyo.talk("それとね、どうして私のこと名前で呼び捨てにするの？　それがまず失礼だとか思わないんですか？"),
            kyo.do("けれど彼は首を捻る",
                    "他人に対して失礼という感覚がないのかも知れない。もしそうなら本当に子供心のまま大きくなってしまった人間なのだろう"),
            kyo.talk("とにかく返して下さい"),
            kyo.do("私はいつまでも手にしたそれを離そうとしない彼から奪い取ろうとしたが、そんな私と彼の間にきょう子が駆け込んできた"),
            kyo.talk("ちょっと！"),
            sk.talk("ショータロ！"),
            sho.talk("きょう子ちゃん。こんばんは"),
            kyo.do("不意に彼の声が柔らかくなる。きょう子も「こんばんは」と返して、その足元に抱きついた"),
            kyo.talk("ねえきょう子。私がちょっと怒ってるの、分かる？"),
            kyo.do("恐い顔をした訳ではなかったけれど、眉を曲げて困った表情で彼女は唇を尖らせる。駄々をこねる時の仕草だ"),
            kyo.talk("きょう子。そもそもなんで外に出てきたの？　私以外の前に出ちゃ駄目だっていつも言ってるでしょ？"),
            kyo.do("怯えた目だ。ぎゅっと彼に抱きついて、その顔をお腹に押し付ける"),
            sho.talk("事情はよく分からないけどさ、こんな小さな子にそこまで言うことないんじゃないかな？"),
            kyo.talk("事情はさっき話した通りです。だいたいどうしてあなたにきょう子が見えるんですか？　あなたに見えちゃいけないものなんですよ？"),
            sho.talk("そんなこと言われてもなあ……ねえ"),
            kyo.do("彼は苦笑してきょう子を見る。どう見ても本当に彼にはあの子が見えているとしか考えられない"),
            kyo.do("今までこんな風に他人が私のＩＦを見ていたことはなかった。先生にだってそういうものだと説明されたし、彼女たちが幽霊やそういう訳の分からない存在ではないということをやっと受け入れて生活を続けていたのに、それを今、目の前のあどけない笑顔の彼が、破壊している"),
            kyo.do("私は唇の震えを感じた"),
            kyo.do("――なんで。もうずっと来なくなっていたのに"),
            kyo.do("しゃがみ込み、耳を塞ぐ"),
            sho.talk("どうしたの今日子？　大丈夫？"),
            kyo.talk("時々こうなるの。お願い。今日はもうそっとして……あっ"),
            kyo.do("ドサリ、という袋が地面に落ちた音に続いて、私の体を何か温かいものが包み込む"),
            kyo.do("目を開いて顔を上げると、彼がそっと背中まで優しく腕を回しているのが分かった"),
            kyo.talk("あの"),
            sho.talk("大丈夫だよ。今日子は何も悪くないから。ボクがついてる"),
            kyo.do("不思議だ。拒否したいのに、その温もりが心地良い"),
            kyo.do("心地良いだけならまだしも、段々と脳が眠っていく。ぼんやりとして、視界が薄れていく"),
            kyo.do("誰も助けてくれないのに、こんなところで落ちてはいけない"),
            kyo.do("何度そう思って意識を取り戻そうとしても、ずぶ濡れになったあの日みたいに体は重くてどうしようもなく、腕も足も感覚がなくなって、私は沈んでいった"),
            )


def vanishing_kyoko(w: World):
    kyo = w.get("kyoko")
    return w.scene("消えたきょうこたち",
            w.cmd.change_stage("Apart"),
            kyo.do("溜息を落としてから顔を上げると、アパートの階段に、翔太郎が座っていた。一人だ"),
            kyo.talk("なんか、元気ないね"),
            kyo.talk("そんなことないけど……今日はきょう子と遊んでないんだね"),
            kyo.do("そう言い返した私に彼は少し困ったように眉を顰める"),
            kyo.talk("何？　あのよく分からない結婚の約束の話だったら――"),
            kyo.talk("違う。そのことじゃないよ。ただきょう子ちゃんたちがいなかったってだけで"),
            kyo.do("え……"),
            kyo.do("私はそれを聞いて慌てて階段を駆け上がる。ドアに鍵を差し込むけれど震えて上手く入らない。やっと入ったと思ったら今度は回らずに、それでも無理矢理に力を入れて解錠すると、勢いよく中に入った"),
            kyo.talk("きょう子？　いる？"),
            kyo.do("誰も答えない"),
            kyo.talk("キョウコは？　いないの？"),
            kyo.do("私はひっそりと静まり返ったままの部屋に上がり込み、そこに二人の姿のないのを確認すると、一度外に出る"),
            kyo.do("階段の下を見たが、そこに彼の姿も見えなくなってしまっていた"),
            )
